---
description: "Release rules for todo.ai"
alwaysApply: true
---
# Release Rules (Short)

- Two-phase only: run `--prepare`, then wait; run `--execute` only on explicit user command.
- CI gate first: `./scripts/wait-for-ci.sh` (fallback `gh run list` + `gh run watch`).
- AI summary: based on commit messages since last release, 2-3 plain paragraphs, no headers, user-facing benefits only; save to `release/AI_RELEASE_SUMMARY.md` and commit it.
- Summary flow: `./release/release.sh --prepare [--beta] [--summary release/AI_RELEASE_SUMMARY.md]`.
- Review file: edit `release/RELEASE_NOTES.md` after prepare.
- Stop on any error; report and wait for instruction.

## Release Script Options
- `--prepare`: Analyze commits and generate release preview (default)
- `--execute`: Execute prepared release (no prompts)
- `--abort [version]`: Abort/clean release state (optional version context)
- `--beta`: Create beta/pre-release (e.g., `v1.0.0b1`)
- `--summary <file>` or `-s <file>`: Include AI summary (auto-detects `release/AI_RELEASE_SUMMARY.md` if omitted)
- `--set-version <version>`: Override proposed version during prepare only
- `--dry-run`: Preview without committing or writing prepare state
- `--help` or `-h`: Show usage
